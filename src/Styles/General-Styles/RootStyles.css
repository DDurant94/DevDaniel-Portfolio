/**
 * Root Styles & Global Reset
 * 
 * @description Foundation styles with CSS reset, base layout, and utility classes.
 * Uses design tokens from Tokens.css for consistent theming.
 * 
 * Strategy:
 * 1. CSS reset for consistent browser defaults
 * 2. Base typography and layout settings
 * 3. Utility classes for common patterns
 * 4. Responsive container system
 * 5. Theme and motion overrides at end of file
 * 
 * Reset Features:
 * - box-sizing: border-box on all elements
 * - Margin reset on typography elements
 * - Smooth scroll behavior
 * - Text rendering optimizations
 * - Image/media display: block
 * - Form element font inheritance
 * - Button cursor: pointer
 * 
 * HTML Base:
 * - -webkit-text-size-adjust: 100%
 * - -moz-text-size-adjust: 100%
 * - text-size-adjust: 100% (prevents zoom on orientation change)
 * - scroll-behavior: smooth (smooth anchor links)
 * 
 * Body Base:
 * - min-height: 100dvh (dynamic viewport height)
 * - text-rendering: optimizeLegibility
 * - No default margin
 * 
 * Main Body:
 * - #main-body: Root element styling
 * - background-color: var(--color-bg)
 * - color: var(--color-text)
 * - font-family: var(--font-family-sans)
 * - line-height: var(--line-height-base)
 * 
 * Layout Containers:
 * - main, footer: max-width var(--container-max-width)
 * - margin-inline: auto (centered)
 * - padding-inline: var(--space-4)
 * - section: padding-block var(--space-section-y)
 * 
 * Utility Classes:
 * - .stack-sm > * + *: margin-top var(--space-2)
 * - .stack-md > * + *: margin-top var(--space-4)
 * - .stack-lg > * + *: margin-top var(--space-6)
 * - .sr-only: Screen reader only (visually hidden)
 * 
 * Container System:
 * - .container: Full width, max-width, auto margins
 * - .container-narrow: max-width var(--container-narrow)
 * - .container-readable: max-width var(--container-readable)
 * - All use padding-inline: var(--space-4)
 * 
 * Screen Reader Only:
 * - position: absolute, 1px size
 * - overflow: hidden, clip: rect(0 0 0 0)
 * - white-space: nowrap, border: 0
 * - Accessible to AT, invisible to sighted users
 * 
 * Token Migration:
 * - Old variables preserved where referenced
 * - Map to new semantic tokens
 * - Prefer var(--color-bg) over raw brand tokens
 * - Tokens defined in Tokens.css
 * 
 * Accessibility:
 * - List role reset for custom styling
 * - Button cursor indicates interactivity
 * - Form font inheritance for consistency
 * - Text rendering optimization
 * - Smooth scroll (consider prefers-reduced-motion)
 * 
 * Performance:
 * - box-sizing: border-box (consistent sizing)
 * - text-rendering: optimizeLegibility
 * - Minimal global selectors
 * - Efficient margin reset
 * 
 * Browser Compatibility:
 * - 100dvh: Modern browsers (Safari 15.4+, Chrome 108+)
 * - scroll-behavior: All modern browsers
 * - text-size-adjust: Universal with prefixes
 * - Custom properties: Widely supported
 * 
 * @layer reset, base, utilities
 * @requires Tokens.css for design token definitions
 */

/* =====================================================================
   GLOBAL RESET & DESIGN TOKENS
   ---------------------------------------------------------------------
   Strategy:
   1. Base primitive palette (grays + brand hues).
   2. Semantic aliases (bg, surface, text, border, accent, states).
   3. Scales: spacing, sizing, typography (fluid), radii, shadows, z, motion.
   4. Responsive helpers (breakpoints) + media query tokens.
   5. Dark mode + reduced motion overrides appended at end of file.

   Migration:
   - Old variables preserved where already referenced; map to new names.
   - Prefer semantic tokens (e.g., var(--color-bg)) over raw brand tokens.
====================================================================== */

/* === RESET === */
*, *::before, *::after { box-sizing: border-box; }
html { 
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
  /* scroll-behavior: smooth; - DISABLED: Lenis handles smooth scroll via JS */
  scroll-behavior: auto;
}

/* Lenis smooth scroll support */
html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-scrolling iframe {
  pointer-events: none;
}

body, h1, h2, h3, h4, h5, h6, p, figure, blockquote { margin: 0; }
ul[role='list'], ol[role='list'] { list-style: none; margin: 0; padding: 0; }
body { min-height: 100dvh; text-rendering: optimizeLegibility; }
img, picture, video, canvas, svg { display: block; max-width: 100%; }
input, button, textarea, select { font: inherit; }
button { cursor: pointer; }

/* Tokens moved to tokens.css. This file now focuses on base layout & theme overrides. */


/* === BASE LAYOUT === */
#main-body { background-color: var(--color-bg); color: var(--color-text); font-family: var(--font-family-sans); line-height: var(--line-height-base); }
main, footer { max-width: var(--container-max-width); margin-inline: auto; padding-inline: var(--space-4); }
section { padding-block: var(--space-section-y); }

/* Utility classes (opt-in) */
.stack-sm > * + * { margin-top: var(--space-2); }
.stack-md > * + * { margin-top: var(--space-4); }
.stack-lg > * + * { margin-top: var(--space-6); }
.sr-only { position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

/* Fluid containers */
.container { width:100%; max-width: var(--container-max-width); margin-inline:auto; padding-inline: var(--space-4); }
.container-narrow { max-width: var(--container-narrow); }
.container-readable { max-width: var(--container-readable); }

/* === Responsive Adjustments (mobile-first) === */
@media (min-width: 768px) {
  :root { --top-margin: var(--space-10); }
}
@media (min-width: 1024px) {
  :root { --top-margin: var(--space-12); }
}

/* === Components: Transitional legacy classes (example) === */
.loading-spinner {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 200px;
  font-size: var(--font-size-md);
  color: var(--color-text-mute);
}

/* Legacy .btn-3d block removed (unused). Modern .btn variants live below. */
/* === Pressable Utility Classes (shared extraction) === */
/* These utilities allow any element to opt into the 3D edge + glow + pressed system without copying shadows. */
.pressable { position: relative; }
/* Edge highlight ring */
.pressable-edge::after { content:''; position:absolute; inset:0; border-radius:inherit; pointer-events:none; box-shadow: var(--pressable-edge-inset); opacity:.55; transition: opacity .35s ease; }
.pressable-edge:hover::after,
.pressable-edge:focus-visible::after { opacity:.85; }
/* Glow variants (outline vs inset stacks) */
.pressable-glow-outline:hover,
.pressable-glow-outline:focus-visible { box-shadow: var(--pressable-glow-stack-outline); }
.pressable-glow-inset:hover,
.pressable-glow-inset:focus-visible { box-shadow: var(--pressable-glow-stack-inset); }
/* Pressed state */
.pressable.is-pressed,
.pressable:active { box-shadow: var(--pressable-pressed-stack); transform: translateY(0) scale(.985); }

/* === Keyframes === */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}