/**
 * Design System ComboBox Component
 * 
 * @description Searchable dropdown input with toggle button and glassmorphic styling.
 * Features backdrop blur, custom shadows, and keyboard/mouse interaction.
 * 
 * Components:
 * - .ds-combobox: Wrapper container
 * - .combo-leading-icon: Optional leading icon
 * - input: Search/filter input
 * - .combo-toggle: Dropdown toggle button
 * - .combo-listbox: Dropdown menu (not shown in this excerpt)
 * 
 * Layout:
 * - position: relative for absolute child positioning
 * - display: flex, align-items: center
 * - flex: 0 1 25rem (shrinks, doesn't grow beyond 25rem)
 * - max-width: 25rem, width: min(100%, 25rem)
 * 
 * Leading Icon:
 * - position: absolute, left 0.75rem
 * - font-size: 1rem
 * - color: 65% text opacity mix
 * - pointer-events: none (doesn't block input)
 * 
 * Input Styling:
 * - width: 100%
 * - padding: var(--space-3) var(--space-6)
 * - padding-left: var(--space-4) (when no icon)
 * - padding-right: 3rem (clearance for toggle button)
 * - border-radius: var(--radius-full) for pill shape
 * - border: 1px solid (30% primary + border-subtle)
 * - font-size: var(--font-size-sm)
 * 
 * Glassmorphic Effect:
 * - background: 75% surface-inset opacity
 * - backdrop-filter: blur(8px)
 * - box-shadow: Multi-layer (outer shadow + inset warm)
 * - Outer: 0 4px 18px -6px rgba(0,0,0,0.35)
 * - Inset: var(--shadow-layer-inset-warm-sm)
 * 
 * Focus State:
 * - border-color: var(--color-primary)
 * - background: var(--color-surface) (opaque)
 * - box-shadow: var(--box-shadow-container) + glow
 * - transform: translateY(-1px) for lift effect
 * - outline: none (custom border instead)
 * 
 * Toggle Button:
 * - position: absolute, right 0.35rem, top 50%
 * - transform: translateY(-50%) for vertical centering
 * - background: 10% primary mix
 * - border: 1px solid (35% primary mix)
 * - Likely has hover/active states (not shown)
 * 
 * Placeholder:
 * - color: var(--input-placeholder-color)
 * - Soft appearance for guidance text
 * 
 * Transitions:
 * - border-color: var(--motion-fade)
 * - box-shadow: var(--motion-fade)
 * - background: var(--motion-fade)
 * - transform: var(--motion-scale)
 * 
 * Color Tokens:
 * - --input-text: Input text color
 * - --input-placeholder-color: Placeholder text
 * - --color-surface-inset: Background base
 * - --color-primary: Border and accents
 * 
 * Accessibility:
 * - role="combobox" on input (via JS)
 * - aria-expanded, aria-controls for dropdown
 * - aria-autocomplete="list" for search behavior
 * - Keyboard navigation (arrows, Enter, Esc)
 * - Focus visible state with custom ring
 * 
 * Keyboard Interaction:
 * - Arrow down: Open menu, navigate options
 * - Arrow up: Navigate options
 * - Enter: Select option
 * - Escape: Close menu
 * - Type to filter options
 * 
 * Performance:
 * - backdrop-filter: May impact low-end devices
 * - transform animations: GPU accelerated
 * - color-mix: Computed at render time
 * - Passive event listeners recommended
 * 
 * Browser Compatibility:
 * - backdrop-filter: All modern browsers
 * - color-mix(): Safari 16.4+, Chrome 111+, Firefox 113+
 * - min(): Widely supported (Safari 11.1+)
 * - Custom properties: Universal support
 * 
 * @layer components
 * @requires Motion tokens, color tokens, shadow definitions
 */

/* Design System ComboBox (restored non-animated glow) */

.ds-combobox {
	position: relative;
	display: flex;
	align-items: center;
	flex: 0 1 25rem;
	max-width: 25rem;
	width: min(100%, 25rem);
}

.ds-combobox .combo-leading-icon {
	position:absolute;
	left: 0.75rem;
	font-size: 1rem;
	color: color-mix(in srgb, var(--color-text) 65%, transparent);
	pointer-events: none;
}

.ds-combobox input {
	width:100%;
	padding: var(--space-3) var(--space-6);
	padding-left: var(--space-4);
	padding-right: 3rem;
	border-radius: var(--radius-full);
	border:1px solid color-mix(in srgb, var(--color-primary) 30%, var(--color-border-subtle));
	font-size: var(--font-size-sm);
	box-shadow: 0 4px 18px -6px rgba(0,0,0,0.35), var(--shadow-layer-inset-warm-sm);
	background: color-mix(in srgb, var(--color-surface-inset) 75%, transparent);
	backdrop-filter: blur(8px);
	transition: border-color var(--motion-fade), box-shadow var(--motion-fade), background var(--motion-fade), transform var(--motion-scale);
	color: var(--input-text);
}

.ds-combobox input::placeholder { color: var(--input-placeholder-color); }

.ds-combobox input:focus {
	outline:none;
	border-color: var(--color-primary);
	box-shadow: var(--box-shadow-container), var(--pressable-glow-stack-outline);
	background: var(--color-surface);
	transform: translateY(-1px);
}

.ds-combobox .combo-toggle {
	position:absolute; right: 0.35rem; top:50%; transform:translateY(-50%);
	background: color-mix(in srgb, var(--color-primary) 10%, transparent);
	border:1px solid color-mix(in srgb, var(--color-primary) 35%, transparent);
	display:inline-flex; align-items:center; justify-content:center;
	width: 2.25rem; height: 2.25rem;
	font-size:1.25rem; color:var(--color-primary);
	cursor:pointer; border-radius: var(--radius-full);
	transition: color var(--motion-fade), background-color var(--motion-fade), box-shadow var(--motion-fade), transform var(--motion-scale);
	box-shadow: var(--shadow-control);
}

.ds-combobox .combo-toggle .combo-toggle-label { display:none; margin-left: .4rem; font-size: .85rem; font-weight: 600; }

@media (min-width: 900px) {
	.ds-combobox .combo-toggle { width: auto; padding: 0 .6rem; gap: .35rem; }
	.ds-combobox .combo-toggle .combo-toggle-label { display:inline; }
	.ds-combobox input { padding-right: 7rem; }
}

.ds-combobox .combo-toggle:hover,
.ds-combobox .combo-toggle:focus-visible { color: var(--color-primary-hover); background: color-mix(in srgb, var(--color-primary) 18%, transparent); box-shadow: var(--pressable-glow-stack-outline); outline:none; }
.ds-combobox .combo-toggle:active { transform: translateY(-50%) scale(.92); box-shadow: var(--pressable-pressed-stack-active); }

.ds-combobox .combo-list { list-style:none; margin:0; padding:0; position:absolute; left:0; top:calc(100% + 0.4rem); width:100%; max-height:260px; overflow-y:auto; border:1px solid var(--color-border-subtle); border-radius: var(--radius-md); background: var(--color-surface); box-shadow: var(--box-shadow-container); opacity:0; transform: translateY(-6px) scale(.975); pointer-events:none; transition: opacity var(--motion-fade), transform var(--motion-scale); will-change: opacity, transform; z-index: var(--z-overlay); }
.ds-combobox .combo-list.show { opacity:1; transform: translateY(0) scale(1); pointer-events:auto; box-shadow: var(--box-shadow-container), 0 4px 14px -4px color-mix(in srgb, var(--color-primary) 25%, transparent); }
.ds-combobox .combo-list li { padding:var(--space-2) var(--space-3); cursor:pointer; font-size:0.9rem; transition: font-size var(--motion-fade), color var(--motion-fade), background-color var(--motion-fade); outline:none; }
.ds-combobox .combo-list li:hover { font-size:0.908rem; }
.ds-combobox .combo-list li:focus-visible { background: color-mix(in srgb, var(--color-primary) 28%, transparent); box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--color-primary) 55%, transparent); }
.ds-combobox .combo-list li.active { background: var(--color-primary); color: var(--color-text-inverse); }
